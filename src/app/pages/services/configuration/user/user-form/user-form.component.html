<div class="p-6">
  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-xl font-semibold text-gray-900">
      {{isEditing ? 'Editar Usuario' : 'Crear Usuario'}}
    </h2>
    <button
      (click)="close()"
      class="p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Form -->
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Username -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Nombre de usuario
      </label>
      <input
        type="text"
        formControlName="username"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
        [class.border-red-500]="isFieldInvalid('username')">
      <p *ngIf="isFieldInvalid('username')" class="mt-1 text-sm text-red-600">
        El nombre de usuario es requerido
      </p>
    </div>

    <!-- Email -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Email
      </label>
      <input
        type="email"
        formControlName="email"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
        [class.border-red-500]="isFieldInvalid('email')">
      <p *ngIf="isFieldInvalid('email')" class="mt-1 text-sm text-red-600">
        Email inv치lido
      </p>
    </div>

    <!-- Password -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Contrase침a
      </label>
      <input
        type="password"
        formControlName="password"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
        [class.border-red-500]="isFieldInvalid('password')">
      <p *ngIf="isFieldInvalid('password')" class="mt-1 text-sm text-red-600">
        {{isEditing ? 'La contrase침a debe tener al menos 6 caracteres' : 'La contrase침a es requerida'}}
      </p>
    </div>

    <!-- Role -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Rol
      </label>
      <select
        formControlName="role"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
        <option value="user">Usuario</option>
        <option value="admin">Administrador</option>
      </select>
    </div>

    <!-- Active Status -->
    <div class="flex items-center">
      <input
        type="checkbox"
        formControlName="active"
        class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
      <label class="ml-2 block text-sm text-gray-700">
        Usuario activo
      </label>
    </div>

    <!-- Actions -->
    <div class="flex justify-end gap-3 pt-4">
      <button
        type="button"
        (click)="close()"
        class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50">
        Cancelar
      </button>
      <button
        type="submit"
        [disabled]="userForm.invalid || loading"
        class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed">
        {{loading ? 'Guardando...' : (isEditing ? 'Actualizar' : 'Crear')}}
      </button>
    </div>
  </form>
</div>
